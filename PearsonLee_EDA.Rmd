---
title: "Heights of Parents and Children Classified by Gender"
author: "Amelia Kelly & Matt Wilchek"
date: "March 6, 2017"
output:
  ioslides_presentation:
    widescreen: true
    transition: slower
    smaller: true
runtime: shiny
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
# Install necessary packages and include packages.
library(ggplot2) # for graphing
library(lattice) # for graphing
library(car) # for graphing
library(memisc) # for function case
library(HistData) # library containing data
library(grid) # for graphing

# Call data set
PearsonLeeData <- (HistData::PearsonLee) 
PearsonLee <- data.frame(PearsonLeeData)

# Create variables for ease of use
child <- (PearsonLee$child)
parent<- (PearsonLee$parent)

# Create column variable as factor for gender
PearsonLee$group <- as.factor(cases(
PearsonLee$gp == 'fs' -> 0,
PearsonLee$gp == 'md' -> 0,
PearsonLee$gp == 'fd' -> 1,
PearsonLee$gp == 'ms' -> 1
))

# Create column variable as average of height columns
PearsonLee$avg <- (PearsonLee$child + PearsonLee$parent)/2
```

## Overview
- Goal
- Background of Dataset
- Research/Background
- Epicycles of Analysis
- Problem Definition (SMART)
- Initial Exploration (Variable Meanings)
- Initial Exploration (Descriptive Statistics)
- Initial Exploration (Histograms)
- Initial Exploration (Scatterplots)
- Initial Exploration (Boxplots)
- Results/Interpretations
- Conclusions and Next Steps

## Goal (About)

- Investigate relationship of parent/child height distributions based on gender using the PearsonLee dataset from HistData in R

## Research/Background
- Pearson and Leeâ€™s 1896 data on the heights of parents and children classified by gender

## Epicycles of Analysis
<div><p style="float: right;"><img src='https://raw.githubusercontent.com/mwilchek/IntroToDS_Project1/master/Epicycles.jpg' width="300 height="150  border="1px"></p>
<p><ul>
<li>State and refine question</li>
<li>Explore data</li>
<li>Build statistical models</li>
<li>Interpret results</li>
<li>Communicate results</li>
</ul></p>
</div>

## Problem Definition (SMART)

Question: Do the means of the average of parent and children heights differ when parent and child differ by gender?

- Specific: Are the means of the averages of Parent/Child Heights equal?
- Measurable: We can the take means
- Achievable: Can compare values via t test
- Relevant: Useful for researchers looking at relationship between height and gender
- Time-Scaled: Multiple data sets exist, so question can be answered in a timely manner

## Initial Exploration (Variable Meanings)
A frequency data frame with 746 observations on the following 6 variables:

- Child: child height in inches, a numeric vector
- Parent: parent height in inches, a numeric vector
- Frequency: a numeric vector
- GP: a factor with levels fd fs md ms
- Par: a factor with levels Father Mother
- Chl: a factor with levels Daughter Son

```{r echo=FALSE}
# Get structure of PearsonLee
str(PearsonLee)
```

## Initial Exploration (Descriptive Statistics)
Initial summary of the PearsonLee dataset:

```{r echo=FALSE}
# Get summary of PearsonLee.
summary(PearsonLee)
```

## Initial Exploration (Scatterplots)
Scatterplots of Children's and Parent's Heights by Gender

```{r echo=FALSE}
# Combined scatterplots of children and parent heights
require(lattice)
xyplot(child ~ parent|par+chl, data=PearsonLee, type=c("p", "r", "smooth"), col.line="red")
```

## Initial Exploration (Histograms)
Histogram of Children Heights

```{r echo=FALSE}
# Include input for selection of bin numbers:
inputPanel(
  selectInput("n_breaks", label = "Number of bins:",
              choices = c(10, 20, 35, 50), selected = 20)
)

# Create histogram of children heights
renderPlot({h<-hist(child, probability = FALSE, breaks = as.numeric(input$n_breaks),
            xlab = "Children's Heights", main = "Histogram of Children's Heights", col="deepskyblue", plot = TRUE)
          })

```

## Initial Exploration (Histograms) {.smaller}
Histogram of Parent Heights 

```{r echo=FALSE}
# Include input for selection of bin numbers:
inputPanel(
  selectInput("n_breaks", label = "Number of bins:",
              choices = c(10, 20, 35, 50), selected = 20)
)

# Create histogram of parent heights
renderPlot({hist(parent, probability = FALSE, breaks = as.numeric(input$n_breaks),
            xlab = "Parent's Heights", main = "Histogram of Parent's Heights", col="deepskyblue", plot = TRUE)

         })
```


## Initial Exploration (Boxplots)
Boxplot of Children and Parent Heights 
```{r echo=FALSE}

# Boxplot of children's heights by gender
par(mfrow=c(1,2))
boxplot(child~chl, data=PearsonLee, main="Boxplot of Children's Height",
xlab="Children", ylab="Children's Height", col=c('powderblue','mistyrose'))

# Boxplot of parent's heights by gender
boxplot(parent~par, data=PearsonLee, main="Boxplot of Parent's Height",
xlab="Parent", ylab="Parent's Height", col=c('mistyrose','powderblue'))
```

## Taking a t.test

```{r echo=FALSE}
# Boxplot of average of child and parent heights by group
boxplot(avg~group, data=PearsonLee, main="Boxplot of Average Heights by Group",
xlab="Group", ylab="Height", col = c('grey79','grey37'))

# Take t test to test whether the means of the different groups are equal.
t.test(PearsonLee$avg~PearsonLee$group) 
layout(matrix(c(1,2,2,3), 2, 2, byrow = TRUE), heights=c(2,1))
```

